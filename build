#!/bin/bash
set -e

: "${K8SAPP_CLUSTER:=dev}"
: "${K8SAPP_NAMESPACE:=harbor}"

: "${HARBOR_CHART:=1.15.1}"
: "${POSTGRESQL_CHART=15.5.31}"
: "${REDIS_CHART:=20.1.3}"

: "${http_proxy:=}"
: "${https_proxy:=}"
: "${no_proxy:=}"

./tools/check-k8sapp

helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update bitnami

./tools/build-postgresql
./tools/build-redis
./tools/build-harbor

